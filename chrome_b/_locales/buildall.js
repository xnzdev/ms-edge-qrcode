var fs = require('fs');
var exc_list = [
  'en',
  'zh_CN',
  'zh_TW',
  'id',
  'es',
  'ja',
  'ko'
];

// var json_string = '[{"locale":"af","country":"Afrikaans","string":"&#39;N super handige QR Kode Generator / Skepper vir jou."},{"locale":"ar","country":"Arabic","string":"مفيد للغاية مولد رمز الاستجابة السريعة / الخالق بالنسبة لك."},{"locale":"az","country":"Azerbaijani","string":"Sizin üçün çox lazımlı QR Code Generator / Creator."},{"locale":"be","country":"Belarusian","string":"Супер зручны QR Code Generator / Creator для вас."},{"locale":"bg","country":"Bulgarian","string":"Супер удобен QR Code Generator / Creator за вас."},{"locale":"bn","country":"Bengali","string":"একটি সুপার সহজ QR কোড জেনারেটর / আপনার জন্য নির্মাতা।"},{"locale":"bs","country":"Bosnian","string":"Izuzetno zgodan QR Code Generator / Creator za vas."},{"locale":"ca","country":"Catalan","string":"Un generador / creador de codi QR molt pràctic per a vosaltres."},{"locale":"ceb","country":"Cebuano","string":"Usa ka super handy QR Code Generator / Creator alang kanimo."},{"locale":"cs","country":"Czech","string":"Super šikovný QR Code Generator / Creator pro vás."},{"locale":"cy","country":"Welsh","string":"Generadur / Creawdwr Cod QR defnyddiol iawn i chi."},{"locale":"da","country":"Danish","string":"En super handy QR-kode Generator / Creator til dig."},{"locale":"de","country":"German","string":"Ein super praktischer QR Code Generator / Creator für Sie."},{"locale":"el","country":"Greek","string":"Ένας σούπερ εύχρηστος QR Code Generator / Δημιουργός για εσάς."},{"locale":"en","country":"English","string":"A super handy QR Code Generator / Creator for you."},{"locale":"eo","country":"Esperanto","string":"A super handy QR Code Generator / Creator for you."},{"locale":"es","country":"Spanish","string":"Un generador de código QR / Creador súper práctico para ti."},{"locale":"et","country":"Estonian","string":"Super-mugav QR-koodi genereerija / looja teile."},{"locale":"eu","country":"Basque","string":"Zuretzako QR Code Generator / sortzailea."},{"locale":"fa","country":"Persian","string":"QR Code Generator Generator / Creator برای شما مفید است."},{"locale":"fi","country":"Finnish","string":"Super-kätevä QR-koodigeneraattori / luoja sinulle."},{"locale":"fr","country":"French","string":"Un générateur / créateur de code QR super pratique pour vous."},{"locale":"ga","country":"Irish","string":"Gineadóir / Cruthaitheoir Cód QR atá áisiúil duit."},{"locale":"gl","country":"Galician","string":"Un creador / creador de código QR moi útil para ti."},{"locale":"gu","country":"Gujarati","string":"તમારા માટે એક સુપર સરળ QR કોડ જનરેટર / નિર્માતા."},{"locale":"ha","country":"Hausa","string":"Mai girma QR Code Generator / Mahalicci a gare ku."},{"locale":"hi","country":"Hindi","string":"आपके लिए एक सुपर आसान क्यूआर कोड जनरेटर / निर्माता।"},{"locale":"hmn","country":"Hmong","string":"A super handy QR Code Generator / Creator for you."},{"locale":"hr","country":"Croatian","string":"Super zgodan QR Code Generator / Creator za vas."},{"locale":"ht","country":"Haitian Creole","string":"Yon super sou la men QR Kòd ak dèlko / Kreyatè pou ou."},{"locale":"hu","country":"Hungarian","string":"Szuper praktikus QR-kódgenerátor / -készítő az Ön számára."},{"locale":"hy","country":"Armenian","string":"Սուպեր ձեռնտու QR Code գեներատոր / Ստեղծող ձեզ համար:"},{"locale":"id","country":"Indonesian","string":"Pembuat / Pembuat Kode QR yang sangat berguna untuk Anda."},{"locale":"ig","country":"Igbo","string":"Akwa QR Code Generator / Onye Okike maka gị."},{"locale":"is","country":"Icelandic","string":"A frábær handlaginn QR kóða Rafall / Creator fyrir þig."},{"locale":"it","country":"Italian","string":"Un generatore / creatore di codici QR super pratico per te."},{"locale":"iw","country":"Hebrew","string":"סופר שימושי קוד QR גנרטור / הבורא בשבילך."},{"locale":"ja","country":"Japanese","string":"あなたのための超便利なQRコードジェネレーター/クリエーター。"},{"locale":"jw","country":"Javanese","string":"A QR Code Generator / Creator super handy kanggo sampeyan."},{"locale":"ka","country":"Georgian","string":"სუპერ მოსახერხებელი QR კოდექსის გენერატორი / შემოქმედი თქვენთვის."},{"locale":"kk","country":"Kazakh","string":"Сізге өте ыңғайлы QR кодын генераторы / жасаушысы."},{"locale":"km","country":"Khmer","string":"កម្មវិធីបង្កើតលេខកូដ QR ងាយស្រួលសម្រាប់អ្នក។"},{"locale":"kn","country":"Kannada","string":"ನಿಮಗಾಗಿ ಒಂದು ಸೂಪರ್ HANDY QR ಕೋಡ್ ಜನರೇಟರ್ / ಕ್ರಿಯೇಟರ್."},{"locale":"ko","country":"Korean","string":"당신을위한 슈퍼 편리한 QR 코드 생성기 / 작성기."},{"locale":"la","country":"Latin","string":"A super handy QR Code Generator / Creator for you."},{"locale":"lo","country":"Lao","string":"ລະຫັດ QR Code Generator / Creator ສໍາລັບທ່ານ."},{"locale":"lt","country":"Lithuanian","string":"Super patogus QR kodas generatorius / kūrėjas jums."},{"locale":"lv","country":"Latvian","string":"Super ērts QR koda ģenerators / radītājs jums."},{"locale":"mg","country":"Malagasy","string":"Fotodrafatra QR Code Generator / Mpahary ho anao manokana."},{"locale":"mi","country":"Maori","string":"Ko te kaiwhakahaere Raraunga QR Code nui mo koe."},{"locale":"mk","country":"Macedonian","string":"Супер практичен QR Code Generator / Creator за вас."},{"locale":"ml","country":"Malayalam","string":"ഒരു സൂപ്പർ കൈകൊണ്ട് QR കോഡ് ജനറേറ്റർ / സ്രഷ്ടാവ്."},{"locale":"mn","country":"Mongolian","string":"Та QR Code Generator / Creator-ыг ашиглана."},{"locale":"mr","country":"Marathi","string":"आपल्यासाठी एक सुलभ क्यूआर कोड जनरेटर / निर्माता."},{"locale":"ms","country":"Malay","string":"Generator / Pencipta Kod QR yang sangat berguna untuk anda."},{"locale":"mt","country":"Maltese","string":"Ġeneratur / Ħallieq tal-Kodiċi QR super handy għalik."},{"locale":"my","country":"Myanmar (Burmese)","string":"သင်တို့အဘို့အဖြေစူပါနေရာလေးကိုဖို့အတွက် QR Code ကို Generator ကို / ဖန်ဆင်းရှင်။"},{"locale":"ne","country":"Nepali","string":"तपाईंको लागि एक सजिलो सजिलो QR कोड जनरेटर / सिर्जनाकर्ता।"},{"locale":"nl","country":"Dutch","string":"Een superhandige QR-codegenerator / maker voor u."},{"locale":"no","country":"Norwegian","string":"En superhendig QR-kode Generator / Creator for deg."},{"locale":"ny","country":"Chichewa","string":"Chojambulira / Qur&#39;an ya QR Code yodalirika kwambiri."},{"locale":"pa","country":"Punjabi","string":"ਤੁਹਾਡੇ ਲਈ ਇੱਕ ਸੁਪਰ ਸੌਖੀ QR ਕੋਡ ਜੇਨਰੇਟਰ / ਸਿਰਜਣਹਾਰ"},{"locale":"pl","country":"Polish","string":"Super poręczny generator kodu QR / kreator dla Ciebie."},{"locale":"pt","country":"Portuguese","string":"Um QR Code Generator / Creator super acessível para você."},{"locale":"ro","country":"Romanian","string":"Un generator de cod QR / Creator foarte bun pentru tine."},{"locale":"ru","country":"Russian","string":"Супер удобный Генератор QR-кодов для Вас."},{"locale":"si","country":"Sinhala","string":"ඔබ සඳහා සුපිරි අත්දැකීමක් ලබා දෙන QR Code Generator / Creator."},{"locale":"sk","country":"Slovak","string":"Super šikovný QR Code Generator / Creator pre vás."},{"locale":"sl","country":"Slovenian","string":"Zelo priročen generator QR kode / ustvarjalca za vas."},{"locale":"so","country":"Somali","string":"Qodobka QR Code Generatorka / Abuurahaaga ee adiga kugu habboon."},{"locale":"sq","country":"Albanian","string":"Një super i dobishëm QR Generator Kodi / Krijues për ju."},{"locale":"sr","country":"Serbian","string":"Изузетно згодан КР Цоде Генератор / Цреатор за вас."},{"locale":"st","country":"Sesotho","string":"Kakaretso e kholo ea QR Code Generator / Creator ho uena."},{"locale":"su","country":"Sundanese","string":"A super gunana QR Code generator / Creator pikeun anjeun."},{"locale":"sv","country":"Swedish","string":"En super praktisk QR-kod Generator / Skapare för dig."},{"locale":"sw","country":"Swahili","string":"Kitambulisho cha QR Code Generator / Muumba kwa ajili yako."},{"locale":"ta","country":"Tamil","string":"நீங்கள் ஒரு சூப்பர் எளிது QR கோட் ஜெனரேட்டர் / கிரியேட்டர்."},{"locale":"te","country":"Telugu","string":"ఒక సూపర్ సులభ QR కోడ్ జెనరేటర్ / మీరు కోసం సృష్టికర్త."},{"locale":"tg","country":"Tajik","string":"Коди генератори QR Generator / Creator барои шумо."},{"locale":"th","country":"Thai","string":"เครื่องสร้างรหัส QR ที่มีประโยชน์มากสำหรับคุณ"},{"locale":"tl","country":"Filipino","string":"Isang napakabilis na madaling gamitin na QR Code Generator / Creator para sa iyo."},{"locale":"tr","country":"Turkish","string":"Sizin için süper kullanışlı bir QR Code Generator / Creator."},{"locale":"uk","country":"Ukrainian","string":"Супер зручний QR Code Generator / Creator для вас."},{"locale":"ur","country":"Urdu","string":"آپ کے لئے ایک سپر آسان QR کوڈ جنریٹر / خالق."},{"locale":"uz","country":"Uzbek","string":"Siz uchun juda qulay QR Code Generator / Creator."},{"locale":"vi","country":"Vietnamese","string":"Trình tạo / tạo mã QR siêu tiện dụng cho bạn."},{"locale":"yi","country":"Yiddish","string":"א סופּער האַנטיק קר קאָוד גענעראַטאָר / באשעפער פֿאַר איר."},{"locale":"yo","country":"Yoruba","string":"Aṣẹpọ koodu monomono QR Code / Ẹlẹda fun ọ."},{"locale":"zh","country":"Chinese","string":"一个超级方便的QR码生成器/创建器为您服务。"},{"locale":"zh-CN","country":"Chinese (Simplified)","string":"一个超级方便的QR码生成器/创建器为您服务。"},{"locale":"zh-TW","country":"Chinese (Traditional)","string":"一個超級方便的QR碼生成器/創建器為您服務。"},{"locale":"zu","country":"Zulu","string":"I-generator QR Code Generator / Umdali onamandla kakhulu."}]';
// var json_this_key = 'app_desc';

var json_string = '[{"locale":"af","country":"Afrikaans","string":"QR Kode Generator"},{"locale":"ar","country":"Arabic","string":"مولد رمز الاستجابة السريعة"},{"locale":"az","country":"Azerbaijani","string":"QR Code Generator"},{"locale":"be","country":"Belarusian","string":"Генератар QR-код"},{"locale":"bg","country":"Bulgarian","string":"Генератор на QR код"},{"locale":"bn","country":"Bengali","string":"QR কোড জেনারেটর"},{"locale":"bs","country":"Bosnian","string":"QR Code Generator"},{"locale":"ca","country":"Catalan","string":"Generador de codi QR"},{"locale":"ceb","country":"Cebuano","string":"QR Code Generator"},{"locale":"cs","country":"Czech","string":"Generátor QR kódu"},{"locale":"cy","country":"Welsh","string":"Generadur Cod QR"},{"locale":"da","country":"Danish","string":"QR Kode Generator"},{"locale":"de","country":"German","string":"QR Code Generator"},{"locale":"el","country":"Greek","string":"QR Code Generator"},{"locale":"en","country":"English","string":"QR Code Generator"},{"locale":"eo","country":"Esperanto","string":"QR Code Generator"},{"locale":"es","country":"Spanish","string":"Generador de Código QR"},{"locale":"et","country":"Estonian","string":"QR-koodigeneraator"},{"locale":"eu","country":"Basque","string":"QR Code Generator"},{"locale":"fa","country":"Persian","string":"ژنراتور کد QR"},{"locale":"fi","country":"Finnish","string":"QR-koodigeneraattori"},{"locale":"fr","country":"French","string":"Générateur de code QR"},{"locale":"ga","country":"Irish","string":"Gineadóir Cód QR"},{"locale":"gl","country":"Galician","string":"Xerador de códigos QR"},{"locale":"gu","country":"Gujarati","string":"ક્યુઆર કોડ જનરેટર"},{"locale":"ha","country":"Hausa","string":"QR Code Generator"},{"locale":"hi","country":"Hindi","string":"क्यूआर कोड जेनरेटर"},{"locale":"hmn","country":"Hmong","string":"QR Code Generator"},{"locale":"hr","country":"Croatian","string":"Generator QR koda"},{"locale":"ht","country":"Haitian Creole","string":"QR Code Generator"},{"locale":"hu","country":"Hungarian","string":"QR-kódgenerátor"},{"locale":"hy","country":"Armenian","string":"QR կոդը գեներատոր"},{"locale":"id","country":"Indonesian","string":"QR Code Generator"},{"locale":"ig","country":"Igbo","string":"QR Code Generator"},{"locale":"is","country":"Icelandic","string":"QR kóða Rafall"},{"locale":"it","country":"Italian","string":"Generatore di codice QR"},{"locale":"iw","country":"Hebrew","string":"קוד QR Generator"},{"locale":"ja","country":"Japanese","string":"QRコードジェネレータ"},{"locale":"jw","country":"Javanese","string":"QR Code Generator"},{"locale":"ka","country":"Georgian","string":"QR კოდი გენერატორი"},{"locale":"kk","country":"Kazakh","string":"QR кодын генераторы"},{"locale":"km","country":"Khmer","string":"QR កូដម៉ាស៊ីនភ្លើង"},{"locale":"kn","country":"Kannada","string":"QR ಕೋಡ್ ಜನರೇಟರ್"},{"locale":"ko","country":"Korean","string":"QR 코드 생성기"},{"locale":"la","country":"Latin","string":"QR Code Generator"},{"locale":"lo","country":"Lao","string":"QR Code Generator"},{"locale":"lt","country":"Lithuanian","string":"QR kodas generatorius"},{"locale":"lv","country":"Latvian","string":"QR koda ģenerators"},{"locale":"mg","country":"Malagasy","string":"QR Code Generator"},{"locale":"mi","country":"Maori","string":"QR Code Generator"},{"locale":"mk","country":"Macedonian","string":"QR Code Generator"},{"locale":"ml","country":"Malayalam","string":"QR കോഡ് ജനറേറ്റർ"},{"locale":"mn","country":"Mongolian","string":"QR код үүсгэгч"},{"locale":"mr","country":"Marathi","string":"क्यूआर कोड जनरेटर"},{"locale":"ms","country":"Malay","string":"Penjana Kod QR"},{"locale":"mt","country":"Maltese","string":"Ġeneratur tal-Kodiċi QR"},{"locale":"my","country":"Myanmar (Burmese)","string":"QR Code ကို Generator ကို"},{"locale":"ne","country":"Nepali","string":"QR Code Generator"},{"locale":"nl","country":"Dutch","string":"QR-codegenerator"},{"locale":"no","country":"Norwegian","string":"QR Kode Generator"},{"locale":"ny","country":"Chichewa","string":"QR Code Generator"},{"locale":"pa","country":"Punjabi","string":"ਕਯੂਆਰ ਕੋਡ ਜੇਨਰੇਟਰ"},{"locale":"pl","country":"Polish","string":"Generator kodów QR"},{"locale":"pt","country":"Portuguese","string":"Gerador de Código QR"},{"locale":"ro","country":"Romanian","string":"QR Code Generator"},{"locale":"ru","country":"Russian","string":"Генератор QR-кода"},{"locale":"si","country":"Sinhala","string":"QR Code Generator"},{"locale":"sk","country":"Slovak","string":"Generátor QR kódu"},{"locale":"sl","country":"Slovenian","string":"Generator QR kode"},{"locale":"so","country":"Somali","string":"QR Code Generator"},{"locale":"sq","country":"Albanian","string":"QR Kodi Generator"},{"locale":"sr","country":"Serbian","string":"КР Цоде Генератор"},{"locale":"st","country":"Sesotho","string":"QR Code Generator"},{"locale":"su","country":"Sundanese","string":"QR code generator"},{"locale":"sv","country":"Swedish","string":"QR kodgenerator"},{"locale":"sw","country":"Swahili","string":"QR Code Generator"},{"locale":"ta","country":"Tamil","string":"QR கோட் ஜெனரேட்டர்"},{"locale":"te","country":"Telugu","string":"QR కోడ్ జెనరేటర్"},{"locale":"tg","country":"Tajik","string":"QR Код Генератор"},{"locale":"th","country":"Thai","string":"เครื่องสร้างรหัส QR"},{"locale":"tl","country":"Filipino","string":"Tagabuo ng QR Code"},{"locale":"tr","country":"Turkish","string":"QR Kod Üreticisi"},{"locale":"uk","country":"Ukrainian","string":"Генератор QR-коду"},{"locale":"ur","country":"Urdu","string":"QR کوڈ جنریٹر"},{"locale":"uz","country":"Uzbek","string":"QR kodlarini ishlab chiqaruvchi"},{"locale":"vi","country":"Vietnamese","string":"Trình tạo mã QR"},{"locale":"yi","country":"Yiddish","string":"קר קאָוד גענעראַטאָר"},{"locale":"yo","country":"Yoruba","string":"Qad Code Generator"},{"locale":"zh","country":"Chinese","string":"QR码生成器"},{"locale":"zh-CN","country":"Chinese (Simplified)","string":"QR码生成器"},{"locale":"zh-TW","country":"Chinese (Traditional)","string":"QR碼生成器"},{"locale":"zu","country":"Zulu","string":"I-QR Code Generator"}]';
var json_this_key = 'app_name';

var translated_json = JSON.parse(json_string);

for (var i = 0; i<translated_json.length; i++) {
  var item = translated_json[i];
  var locale_id = item.locale;
  if(locale_id == 'zh-TW') {
    locale_id = 'zh_TW';
  }
  if(locale_id == 'zh-CN') {
    locale_id = 'zh_CN';
  }
  if(locale_id == 'zh') {
    // No need to work on zh
    continue;
  }
  if (exc_list.includes(locale_id)) {
    console.log('skip', locale_id);
    continue;
  }
  console.log('working on ', locale_id);
  var locale_country = item.country;
  var locale_content = item.string;
  updateJSONByKeyLang(json_this_key, locale_content, locale_id);
}

// var fs = require('fs');
// var dir = './tmp';

// if (!fs.existsSync(dir)){
//     fs.mkdirSync(dir);
// }

// var data = 'aaa';
// fs.readFileSync(__dirname+)
// fs.writeFileSync(__dirname+'/a.txt', data);

function readJSONByLang(lang) {
  console.log('reading:', lang);
  var file_location = __dirname + '/' + lang + '/messages.json';
  var json_source = '';
  try {
    json_source = fs.readFileSync(file_location, {
      encoding: 'utf8'
    });
    console.log('[121] read', json_source);
  } catch (e) {
    console.log('[156] error reading:', e);
    try {
      fs.mkdirSync(lang);
    } catch(e) {

    }
    fs.writeFileSync(file_location, '');
  }
  // var json_obj = JSON.parse(json_source);
  if(json_source == '') {
    json_source = "{}";
  }
  return JSON.parse(json_source);
}

function updateJSONByKeyLang(key, content, lang) {
  var file_location = __dirname + '/' + lang + '/messages.json';
  var original_JSON_obj = readJSONByLang(lang);
  original_JSON_obj[key] = {"message":content};
  var new_data = JSON.stringify(original_JSON_obj);
  fs.writeFileSync(file_location, new_data);
}